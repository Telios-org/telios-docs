---
id: encryption
title: Encryption
sidebar_label: Encryption
---

Telios uses cryptography based on open source components that have been widely used and accepted in the security community. Encryption is handled with the [sodium-native](https://sodium-friends.github.io/docs/) library, which provides low-level bindings for [Libsodium](https://doc.libsodium.org), and with [SQL Cipher](https://www.zetetic.net/sqlcipher/) for indexing encrypted data on local devices.

Our rule is to encrypt everything possible at rest and in-transit by default without compromising features and usability that users expect in an email client.

## Keypairs

Telios uses two types of keypairs generated by [sodium-native](https://sodium-friends.github.io/docs/) on the client during account registration.

### Signing Keypair
`sodium.crypto_sign_keypair()` generates a private key used for creating a signature to append to messages and a public key that can be used to verify that the appended signature was created by the account that owns the public key.

### Secret Box Keypair
`sodium.crypto_box_keypair()` generates a private and public key for encrypting messages specifically for another user. 

If Bob wants to send Alice an email, Bob retrieves Alice's public key and uses it to encrypt the metadata Alice needs to retrieve and decrypt her email from Bob's local drive. When Alice decrypts Bob's message, she can verify the encrypted message came from Bob by making sure it matches his registered public key.

## Sealed Box Encryption
`sodium.crypto_box_seal()` is used for sending encrypted messages anonymously with a recipient's public key. The recipient can decrypt the message using their private key but cannot identify the sender based on the encrypted message. These messages get encrypted with an ephemeral keypair that is discarded immediately after encryption.

These are used when sending encrypted messages to recipients which contain metadata on how to retrieve their emails from the sender's local drive. These messages are sent as sealed boxes to prevent Telios from knowing the identity of email senders.

## Authenticated Encryption with Additional Data
`sodium.crypto_aead_xchacha20poly1305_ietf_encrypt()` encrypts emails with a newly generated key for each message and a nonce to keep it confidential. Every email sent uses this method to ensure a different encryption key is used for every email. The key is encrypted and stored separately from the email with the recipient's secret box public key. In the case where an attacker discovered an email's encryption key, they would be unable to use that key to decrypt any other messages.



